{% extends 'myapp/base.html' %}
{% load static %}
{% block content %}


<div class='post'>
 <p id='title' style='color:black;font-size:550%;margin-left:40px;margin-right:40px;text-align:center;margin-top:80px;padding-top:0px;line-height:100%;'>{{ post.title }}</p>
 <p id='categories' style='font-weight:bold;color:rgb(38,38,122);font-size:170%;text-align:center;margin-left:0px;margin-bottom:50px;padding-top:30px;'>Written by: 
  <a href="{% url 'profilepage' userpk=post.author.pk %}" style='color:rgb(73,118,173);'>{{ post.author }} </a><br>{% if post.contributers.all.count != 0 %}Contributions by: <a style='color:rgb(73,118,173);' >{% for contributer in post.contributers.all %}
<a href="{% url 'profilepage' userpk=contributer.pk %}" >{{ contributer }}</a>
{% if post.contributers.all.count > 1 %}, {% endif %}
{% endfor %}</a><br>{% endif %}
  <a style='color:rgb(73,118,173);' href="{% url 'CatPage' cat=post.category %}"> {{post.category}}</a>
  <a style='color:rgb(73,118,173);padding-left:10px;' href="{% url 'subcat' Subcategory=post.subcategory %}">{{post.subcategory}}</a>
 </p>

 <svg id='img' width='980' height='653.3'>
  <clipPath>                                                            
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />               
  </clipPath>   
  <image style='' id='image' href="/media/{{ post.upload }}"/>   
 </svg>
 <span id='x1' style='display:none;'>{{ post.x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.y2 }}</span>

 <p id='textbox' style='margin-top:200px;'>{{post.Text}}</p>
 {% if post.p1 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p1 }}"/>
 </svg>
 <span id='x1' style='display:none;'>{{ post.p1x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p1x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p1y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p1y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.b}}</p>
 {% if post.p2 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p2 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p2x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p2x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p2y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p2y2 }}</span>
 {%	 endif %}
 <p id='textbox'>{{post.c}}</p>
 {% if post.p3 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p3 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p3x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p3x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p3y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p3y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.d}}</p>
 {% if post.p4 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p4 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p4x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p4x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p4y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p4y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.e}}</p>
 {% if post.p5 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p5 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p5x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p5x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p5y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p5y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.f}}</p>
 {% if post.p6 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p6 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p6x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p6x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p6y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p6y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.g}}</p>
 {% if post.p7 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p7 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p7x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p7x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p7y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p7y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.h}}</p>
 {% if post.p8 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p8 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p8x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p8x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p8y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p8y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.i}}</p>
 {% if post.p9 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p9 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p9x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p9x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p9y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p9y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.j}}</p>
 {% if post.p10 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p10 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p10x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p10x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p10y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p10y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.k}}</p>
 {% if post.p11 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p11 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p11x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p11x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p11y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p11y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.l}}</p>
 {% if post.p12 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p12 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p12x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p12x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p12y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p12y2 }}</span>
 {% endif %}
 <p id='textbox'>{{post.m}}</p>
 {% if post.p13 != 't' %}
 <svg id='img' style='margin-left:49px;' width='882' height='653.3'>
  <clipPath>
   <rect id='bunt' x='0' y='0' width='980px' height='653.3px' />
  </clipPath>
  <image style='' id='image' href="/media/{{ post.p13 }}"/>                               </svg>
 <span id='x1' style='display:none;'>{{ post.p13x1 }}</span>
 <span id='x2' style='display:none;'>{{ post.p13x2 }}</span>
 <span id='y1' style='display:none;'>{{ post.p13y1 }}</span>
 <span id='y2' style='display:none;'>{{ post.p13y2 }}</span>
 {% endif %}
</div>
{% if post.published_date != null %}<label style='margin-left:40px;'>Published: <a style='color:rgb(73,118,173);' >{{ post.published_date }}</a></label><br>{% endif %}
<label style='margin-left:40px;'>Last Edited: <a style='color:rgb(73,118,173);' >{{ post.lastedit }}</a></label><br>

{% if user.is_authenticated %}
<label>
 <a style='text-align:right;' href="{% url 'postedit' PK=post.pk %}">
  <p style='border-style:solid;background-color:rgb(38,38,122);color:white;padding:20px;padding-left:120px;padding-right:120px;margin-top:100px;border-radius:100px;font-weight:bold;font-size:400%;'>Edit Post</p>
 </a>
</label>
{% endif %}
 <script>
  img = document.querySelectorAll('#img');
 image = document.querySelectorAll('#image');
 x1 = document.querySelectorAll('#x1');
 y1 = document.querySelectorAll('#y1');
 x2 = document.querySelectorAll('#x2');
 y2 = document.querySelectorAll('#y2');
 ugh = document.querySelectorAll('#bunt');
 nug = document.querySelectorAll('clipPath');
 for(z=0; z < img.length; z++){
  w = +x2[z].innerHTML - +x1[z].innerHTML;
  y = +y2[z].innerHTML - +y1[z].innerHTML;
  nug[z].id = 'clip' + z;
  clip = document.getElementById('clip' + z);
  ugh[z].setAttribute('x', x1[z].innerHTML);
  ugh[z].setAttribute('y', y1[z].innerHTML);
  ugh[z].setAttribute('width', w);
  ugh[z].setAttribute('height', y);
  image[z].style.clipPath='url(#' + clip.id + ')';
  img[z].setAttribute('viewBox', x1[z].innerHTML + ' ' + y1[z].innerHTML + ' ' + w + ' ' + y);
 };
 </script>
{% endblock %}
